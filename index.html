<!DOCTYPE html>
<html>
  <head>
    <title>CS:GO Case Opening</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      :root {
        --bg-color: #1e1e1e;
        --case-color: #2a2a2e;
        --primary: #5d8aff;
        --rare: #ffcc00;
        --legendary: #ff4d4d;
      }
      body {
        font-family: "Arial", sans-serif;
        background: var(--bg-color);
        color: white;
        margin: 0;
        padding: 0;
      }
      .header {
        display: flex;
        justify-content: space-between;
        padding: 15px;
        background: #2a2a2a;
      }
      .balance {
        background: var(--primary);
        padding: 5px 10px;
        border-radius: 10px;
        font-weight: bold;
      }
      .case {
        background: var(--case-color);
        border-radius: 15px;
        margin: 15px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }
      .case-image {
        width: 200px;
        height: 150px;
        object-fit: contain;
        margin-bottom: 10px;
      }
      .btn {
        background: var(--primary);
        border: none;
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: bold;
        cursor: pointer;
        margin: 5px;
      }
      .btn-fast {
        background: var(--legendary);
      }
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 100;
        justify-content: center;
        align-items: center;
      }
      .modal-content {
        background: var(--case-color);
        padding: 20px;
        border-radius: 15px;
        width: 90%;
        max-width: 400px;
      }
      .item-rarity-common {
        color: #ffffff;
      }
      .item-rarity-rare {
        color: var(--rare);
      }
      .item-rarity-legendary {
        color: var(--legendary);
      }

      /* –†—É–ª–µ—Ç–∫–∞ */
      .roulette-container {
        margin: 20px 0;
        overflow: hidden;
        position: relative;
        height: 120px;
        border: 2px solid var(--primary);
        border-radius: 10px;
      }
      .roulette-items {
        display: flex;
        position: absolute;
        left: 0;
        transition: left 0.1s linear;
      }
      .roulette-item {
        min-width: 100px;
        height: 100px;
        margin: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #333;
        border-radius: 8px;
      }
      .roulette-item img {
        width: 60px;
        height: 60px;
        object-fit: contain;
      }
      .roulette-pointer {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 2px;
        height: 110px;
        background: var(--legendary);
        z-index: 2;
      }

      /* –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å */
      .admin-panel {
        display: none;
        background: #333;
        padding: 15px;
        margin: 15px;
        border-radius: 10px;
      }
      .admin-btn {
        background: var(--legendary);
        margin-top: 10px;
      }

      /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
      .action-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 15px;
      }
      .sell-btn {
        background: #ff4d4d;
      }
      .keep-btn {
        background: #4caf50;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div id="profile-btn">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
      <div class="balance" id="balance">1000 coins</div>
    </div>

    <div class="container">
      <h2 style="text-align: center; margin-top: 10px">–í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å</h2>

      <!-- –û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å -->
      <div class="case">
        <img src="weapon_case.png" class="case-image" alt="–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å" />
        <h3>–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å</h3>
        <p>–¶–µ–Ω–∞: 100 coins</p>
        <button class="btn" onclick="initRoulette('weapon')">–û—Ç–∫—Ä—ã—Ç—å</button>
        <button class="btn btn-fast" onclick="initRoulette('weapon', true)">
          –ë—ã—Å—Ç—Ä–æ –æ—Ç–∫—Ä—ã—Ç—å
        </button>
      </div>

      <!-- –ù–æ–∂–µ–≤–æ–π –∫–µ–π—Å -->
      <div class="case">
        <img src="knife_case.png" class="case-image" alt="–ù–æ–∂–µ–≤–æ–π –∫–µ–π—Å" />
        <h3>–ù–æ–∂–µ–≤–æ–π –∫–µ–π—Å</h3>
        <p>–¶–µ–Ω–∞: 500 coins</p>
        <button class="btn" onclick="initRoulette('knife')">–û—Ç–∫—Ä—ã—Ç—å</button>
        <button class="btn btn-fast" onclick="initRoulette('knife', true)">
          –ë—ã—Å—Ç—Ä–æ –æ—Ç–∫—Ä—ã—Ç—å
        </button>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
      <button class="btn admin-btn" onclick="toggleAdminPanel()" id="admin-btn">
        –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
      </button>

      <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
      <button
        class="btn"
        style="display: block; margin: 20px auto"
        onclick="showDepositModal()"
      >
        üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å
      </button>
    </div>

    <!-- –†—É–ª–µ—Ç–∫–∞ -->
    <div class="modal" id="roulette-modal">
      <div class="modal-content">
        <h3 id="roulette-title">–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞</h3>
        <div class="roulette-container">
          <div class="roulette-pointer"></div>
          <div class="roulette-items" id="roulette-items"></div>
        </div>
        <button
          class="btn"
          id="stop-roulette"
          style="display: none"
          onclick="stopRoulette()"
        >
          –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
        </button>
      </div>
    </div>

    <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div class="admin-panel" id="admin-panel">
      <h3>üîê –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
      <div id="admin-login" style="display: block">
        <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞:</p>
        <input type="password" id="admin-code" placeholder="–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞" />
        <button class="btn" onclick="checkAdminCode()">–í–æ–π—Ç–∏</button>
      </div>
      <div id="admin-content" style="display: none">
        <h4>–î–µ–π—Å—Ç–≤–∏—è:</h4>
        <button class="btn" onclick="showCreatePromo()">
          –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
        </button>
        <button class="btn" onclick="showAdminList()">–°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤</button>

        <div id="create-promo" style="display: none; margin-top: 15px">
          <input type="text" id="promo-value" placeholder="–°—É–º–º–∞ (coins)" />
          <input
            type="text"
            id="promo-uses"
            placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π"
          />
          <button class="btn" onclick="generatePromo()">–°–æ–∑–¥–∞—Ç—å</button>
          <p id="promo-result"></p>
        </div>

        <div id="admin-list" style="display: none; margin-top: 15px">
          <h4>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã:</h4>
          <ul id="admins-list"></ul>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal" id="profile-modal">
      <div class="modal-content">
        <h3>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h3>
        <div id="profile-data">
          <p>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º:</p>
          <input type="text" id="username" placeholder="–ù–∏–∫–Ω–µ–π–º" />
          <button class="btn" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div class="modal" id="deposit-modal">
      <div class="modal-content">
        <h3>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h3>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É (1 coin = 1 —Ä—É–±–ª—å):</p>
        <div style="display: flex; gap: 10px; margin: 15px 0">
          <button class="btn" style="flex: 1" onclick="setDepositAmount(100)">
            100
          </button>
          <button class="btn" style="flex: 1" onclick="setDepositAmount(500)">
            500
          </button>
          <button class="btn" style="flex: 1" onclick="setDepositAmount(1000)">
            1000
          </button>
        </div>
        <input
          type="number"
          id="custom-amount"
          placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é —Å—É–º–º—É"
          min="1"
          max="3000"
        />
        <button class="btn" style="margin-top: 15px" onclick="processDeposit()">
          –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
        </button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–ª–∞—Ç–µ–∂–∞ -->
    <div class="modal" id="payment-modal">
      <div class="modal-content">
        <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–ø–ª–∞—Ç–µ</h3>
        <p>–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ <span id="payment-amount">100</span> —Ä—É–±–ª–µ–π –Ω–∞ –∫–∞—Ä—Ç—É:</p>
        <p style="font-weight: bold; font-size: 18px">2200 7007 1260 4007</p>
        <p>–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç @qwrie211</p>
        <button class="btn" onclick="closePaymentModal()">–Ø –æ–ø–ª–∞—Ç–∏–ª</button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
    <div class="modal" id="result-modal">
      <div class="modal-content" style="text-align: center">
        <h3 id="result-title">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h3>
        <img
          id="result-image"
          src=""
          style="width: 150px; height: 150px; object-fit: contain"
        />
        <p id="result-name" style="font-size: 18px; font-weight: bold"></p>
        <p id="result-rarity"></p>
        <div class="action-buttons">
          <button class="btn sell-btn" onclick="sellItem()">
            –ü—Ä–æ–¥–∞—Ç—å (+XX coins)
          </button>
          <button class="btn keep-btn" onclick="keepItem()">
            –û—Å—Ç–∞–≤–∏—Ç—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
          </button>
        </div>
      </div>
    </div>

    <script>
      // –î–∞–Ω–Ω—ã–µ –∫–µ–π—Å–æ–≤
      const cases = {
        weapon: {
          name: "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å",
          price: 100,
          items: [
            {
              name: "AK-47 | –ö—Ä–∞—Å–Ω–∞—è –ª–∏–Ω–∏—è",
              rarity: "rare",
              image: "ak_redline.png",
              value: 200,
            },
            {
              name: "AWP | –ß–µ—Ä–Ω—ã–π –≥—Ä–∏—Ñ–æ–Ω",
              rarity: "common",
              image: "awp_gryphon.png",
              value: 50,
            },
            {
              name: "M4A4 | –ò–º–ø–µ—Ä–∞—Ç–æ—Ä",
              rarity: "legendary",
              image: "m4a4_emperor.png",
              value: 500,
            },
            {
              name: "Desert Eagle | –ö–æ–±—Ä–∞",
              rarity: "common",
              image: "deagle_cobra.png",
              value: 40,
            },
            {
              name: "USP-S | –ö–∏–ª–æ–∫–æ–º–∞–Ω–¥–∞",
              rarity: "rare",
              image: "usp_kill.png",
              value: 150,
            },
          ],
        },
        knife: {
          name: "–ù–æ–∂–µ–≤–æ–π –∫–µ–π—Å",
          price: 500,
          items: [
            {
              name: "–ö–µ—Ä–∞–º–±–∏—Ç | –£–ª—å—Ç—Ä–∞—Ñ–∏–æ–ª–µ—Ç",
              rarity: "legendary",
              image: "karambit_ultraviolet.png",
              value: 1000,
            },
            {
              name: "–ù–∞–≤–∞—Ö–∞ | –ö—Ä–æ–≤–∞–≤–∞—è –ø–∞—É—Ç–∏–Ω–∞",
              rarity: "rare",
              image: "navaja_web.png",
              value: 600,
            },
            {
              name: "–ë–∞–±—É—Ç–∫–∞ | –°–∏–Ω–∏–π —Å—Ç–∞–ª—å–Ω–æ–π",
              rarity: "rare",
              image: "butterfly_blue.png",
              value: 700,
            },
            {
              name: "–§–∞–ª—å—à–∏–æ–Ω | –ù–æ—á–Ω—ã–µ –ø–æ–ª–æ—Å—ã",
              rarity: "rare",
              image: "falchion_night.png",
              value: 550,
            },
          ],
        },
      };

      // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      let userData = {
        balance: 1000,
        username: null,
        userId: Math.floor(Math.random() * 1000000),
        inventory: [],
        isAdmin: false,
      };

      // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä—É–ª–µ—Ç–∫–∏
      let rouletteInterval;
      let rouletteSpeed = 10;
      let currentCase = null;
      let selectedItem = null;
      let rouletteItems = [];

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
      Telegram.WebApp.expand();
      Telegram.WebApp.ready();

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
      function updateBalance() {
        document.getElementById(
          "balance"
        ).textContent = `${userData.balance} coins`;
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä—É–ª–µ—Ç–∫–∏
      function initRoulette(caseType, isFast = false) {
        currentCase = caseType;
        const caseData = cases[caseType];

        if (userData.balance < caseData.price) {
          alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
          return;
        }

        // –°–Ω–∏–º–∞–µ–º –¥–µ–Ω—å–≥–∏ —Å—Ä–∞–∑—É
        userData.balance -= caseData.price;
        updateBalance();

        // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ä—É–ª–µ—Ç–∫—É
        const rouletteContainer = document.getElementById("roulette-items");
        rouletteContainer.innerHTML = "";

        // –°–æ–∑–¥–∞–µ–º 20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
        rouletteItems = [];
        for (let i = 0; i < 20; i++) {
          const item =
            caseData.items[Math.floor(Math.random() * caseData.items.length)];
          rouletteItems.push(item);

          const itemElement = document.createElement("div");
          itemElement.className = "roulette-item";
          itemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <small>${item.name}</small>
                `;
          rouletteContainer.appendChild(itemElement);
        }

        document.getElementById(
          "roulette-title"
        ).textContent = `–û—Ç–∫—Ä—ã—Ç–∏–µ: ${caseData.name}`;
        document.getElementById("roulette-modal").style.display = "flex";

        if (isFast) {
          rouletteSpeed = 30;
          setTimeout(stopRoulette, 1500);
        } else {
          rouletteSpeed = 10;
          document.getElementById("stop-roulette").style.display = "block";
        }

        startRoulette();
      }

      function startRoulette() {
        const roulette = document.getElementById("roulette-items");
        let position = 0;

        rouletteInterval = setInterval(() => {
          position -= rouletteSpeed;
          roulette.style.left = position + "px";

          // –ï—Å–ª–∏ –¥–æ—à–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞ - –Ω–∞—á–∏–Ω–∞–µ–º —Å–Ω–∞—á–∞–ª–∞
          if (position <= -roulette.offsetWidth + 300) {
            position = 0;
          }
        }, 16);
      }

      function stopRoulette() {
        clearInterval(rouletteInterval);
        document.getElementById("stop-roulette").style.display = "none";

        // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (–∏–º–∏—Ç–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
        const caseData = cases[currentCase];
        const totalProbability = caseData.items.reduce((sum, item) => {
          if (item.rarity === "common") return sum + 70;
          if (item.rarity === "rare") return sum + 25;
          return sum + 5; // legendary
        }, 0);

        const randomNum = Math.random() * totalProbability;
        let cumulative = 0;
        selectedItem = null;

        for (const item of caseData.items) {
          let prob = 0;
          if (item.rarity === "common") prob = 70;
          else if (item.rarity === "rare") prob = 25;
          else prob = 5; // legendary

          cumulative += prob;
          if (randomNum <= cumulative) {
            selectedItem = item;
            break;
          }
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        setTimeout(() => {
          document.getElementById("roulette-modal").style.display = "none";
          showResult(selectedItem);
        }, 500);
      }

      // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      function showResult(item) {
        document.getElementById("result-title").textContent = "üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!";
        document.getElementById("result-name").textContent = item.name;
        document.getElementById(
          "result-rarity"
        ).innerHTML = `–†–µ–¥–∫–æ—Å—Ç—å: <span class="item-rarity-${item.rarity}">${item.rarity}</span>`;
        document.getElementById("result-image").src = item.image;

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–æ–¥–∞–∂–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
        const sellBtn = document.querySelector(".sell-btn");
        sellBtn.textContent = `–ü—Ä–æ–¥–∞—Ç—å (+${item.value} coins)`;

        document.getElementById("result-modal").style.display = "flex";
      }

      function sellItem() {
        if (selectedItem) {
          userData.balance += selectedItem.value;
          updateBalance();
          alert(`–í—ã –ø—Ä–æ–¥–∞–ª–∏ –ø—Ä–µ–¥–º–µ—Ç –∑–∞ ${selectedItem.value} coins!`);
          closeResultModal();
        }
      }

      function keepItem() {
        if (selectedItem) {
          userData.inventory.push(selectedItem);
          alert("–ü—Ä–µ–¥–º–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å!");
          closeResultModal();
        }
      }

      // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
      function toggleAdminPanel() {
        const panel = document.getElementById("admin-panel");
        panel.style.display =
          panel.style.display === "block" ? "none" : "block";
      }

      function checkAdminCode() {
        const code = document.getElementById("admin-code").value;
        if (code === "123") {
          // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥
          userData.isAdmin = true;
          document.getElementById("admin-login").style.display = "none";
          document.getElementById("admin-content").style.display = "block";
          alert("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!");
        } else {
          alert("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞!");
        }
      }

      function showCreatePromo() {
        document.getElementById("create-promo").style.display = "block";
        document.getElementById("admin-list").style.display = "none";
      }

      function showAdminList() {
        document.getElementById("admin-list").style.display = "block";
        document.getElementById("create-promo").style.display = "none";

        // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∞–¥–º–∏–Ω–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
        const adminsList = document.getElementById("admins-list");
        adminsList.innerHTML =
          "<li>Admin 1 (admin@example.com)</li><li>Admin 2 (moder@example.com)</li>";
      }

      function generatePromo() {
        const value = document.getElementById("promo-value").value;
        const uses = document.getElementById("promo-uses").value;

        if (!value || !uses) {
          alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
          return;
        }

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ–º–æ–∫–æ–¥
        const promoCode =
          "PROMO-" + Math.random().toString(36).substring(2, 8).toUpperCase();
        document.getElementById("promo-result").innerHTML = `
                –ü—Ä–æ–º–æ–∫–æ–¥: <strong>${promoCode}</strong><br>
                –ó–Ω–∞—á–µ–Ω–∏–µ: ${value} coins<br>
                –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π: ${uses}
            `;

        // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
      }

      // –†–∞–±–æ—Ç–∞ —Å –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
      function showProfileModal() {
        document.getElementById("profile-modal").style.display = "flex";
      }

      function showDepositModal() {
        document.getElementById("deposit-modal").style.display = "flex";
      }

      function closeModals() {
        document.getElementById("profile-modal").style.display = "none";
        document.getElementById("deposit-modal").style.display = "none";
        document.getElementById("payment-modal").style.display = "none";
        document.getElementById("result-modal").style.display = "none";
      }

      function closeResultModal() {
        document.getElementById("result-modal").style.display = "none";
      }

      function setDepositAmount(amount) {
        document.getElementById("custom-amount").value = amount;
      }

      function processDeposit() {
        const amount = parseInt(document.getElementById("custom-amount").value);
        if (isNaN(amount) || amount < 1 || amount > 3000) {
          alert("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –æ—Ç 1 –¥–æ 3000");
          return;
        }

        document.getElementById("payment-amount").textContent = amount;
        document.getElementById("deposit-modal").style.display = "none";
        document.getElementById("payment-modal").style.display = "flex";
      }

      function closePaymentModal() {
        closeModals();
        alert("–ë–∞–ª–∞–Ω—Å –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º");
      }

      function saveProfile() {
        const username = document.getElementById("username").value.trim();
        if (username) {
          userData.username = username;
          document.getElementById("profile-data").innerHTML = `
                    <p>–ù–∏–∫: ${username}</p>
                    <p>ID: ${userData.userId}</p>
                    <p>–ë–∞–ª–∞–Ω—Å: ${userData.balance} coins</p>
                    <p>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: ${userData.inventory.length} –ø—Ä–µ–¥–º–µ—Ç–æ–≤</p>
                `;
        }
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      document
        .getElementById("profile-btn")
        .addEventListener("click", showProfileModal);
      document.addEventListener("click", (e) => {
        if (e.target.classList.contains("modal")) {
          closeModals();
        }
      });

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      updateBalance();
    </script>
  </body>
</html>
